{{extend 'layoutSIRADEXloged.html'}}

{{block titulo}}
    <h2> <center> Gestión de Archivos Históricos </center> </h2>
{{end}}

{{block contenido}}
<!-- Nav tabs -->
<div class="card"> 
<ul class="nav nav-tabs" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" data-toggle="tab" href="#Tipos-de-Actividad" role="tab" id="tabTiposDeTrabajo">Tipos de Actividad</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#Programas" role="tab">Programas</a>
  </li>
</ul>


   
<div class="tab-content">
  <div class="tab-pane active" id="Tipos-de-Actividad" role="tabpanel">
        <div class="container-fluid">
        <table class="table table-striped table-condensed table-hover sortable">
            <thead>
                <tr>
                    <th> <center> Elemento Eliminados </center> </th>
                    <th> <center> Usuario Eliminó </center> </th>
                    <th> <center> Fecha de Eliminación </center> </th>
                    <th> <center> Restaurar </center> </th>
                    <th> <center> Eliminar </center> </th>
                </tr>
            </thead>
            <tbody>
                {{for tipoActividad in listaTipoActividades:}}
                    <tr>
                        <td> <center> {{=tipoActividad.nombre}} </center> </td>
                        <td> <center> {{=tipoActividad.descripcion}} </center> </td>
                        <td> <center> {{=tipoActividad.tipo_p_r}} </center> </td>
                        <td class="center-vertically">
                            <center>
                                <a href="#">
                                    <span class="glyphicon glyphicon-refresh restaurar" 
                                          data-toggle="modal" 
                                          data-target="#myModalRestaurar"
                                          data-id-tipo='{{=tipoActividad.id_tipo}}'
                                          >
                                        
                                    </span>
                                </a>
                            <center>
                        </td>
                        <td class="center-vertically">
                            <center>
                                <a href="#">
                                    <span class="glyphicon glyphicon-remove red" 
                                          data-toggle="modal" 
                                          data-target="#myModalEliminar"
                                          data-id-tipo='{{=tipoActividad.id_tipo}}'></span>
                                </a>
                            <center>
                         </td>
                    </tr>
                {{pass}}
                    
            </tbody>
        </table>
    </div>
      
  </div>
  <div class="tab-pane" id="Programas" role="tabpanel">
      <div class="container-fluid">
        <table class="table table-striped table-condensed table-hover sortable">
            <thead>
                <tr>
                    <th> <center> Elemento Eliminados </center> </th>
                    <th> <center> Usuario Eliminó </center> </th>
                    <th> <center> Fecha de Eliminación </center> </th>
                    <th> <center> Restaurar </center> </th>
                    <th> <center> Eliminar </center> </th>
                </tr>
            </thead>
            <tbody>
                    <tr>
                        <td> <center> < Programa Eliminado 1 > </center> </td>
                        <td> <center> < Usuario Eliminó 1 > </center> </td>
                        <td> <center> < Fecha de Eliminación 1 > </center> </td>
                        <td class="center-vertically">
                            <center>
                                <a>
                                    <span class="glyphicon glyphicon-refresh restaurar" data-toggle="modal" data-target="#myModalRestaurar"></span>
                                </a>
                            <center>
                        </td>
                        <td class="center-vertically">
                            <center>
                                <a>
                                    <span class="glyphicon glyphicon-remove red" 
                                          data-toggle="modal" 
                                          data-target="#myModalEliminar"
                                          data-id-tipo=''></span>
                                </a>
                            <center>
                         </td>
                    </tr>
                    <tr>
                        <td> <center> < Programa Eliminado 2 > </center> </td>
                        <td> <center> < Usuario Eliminó 2 > </center> </td>
                        <td> <center> < Fecha de Eliminación 2 > </center> </td>
                        <td class="center-vertically">
                            <center>
                                <a>
                                    <span class="glyphicon glyphicon-refresh restaurar" data-toggle="modal" data-target="#myModalRestaurar"></span>
                                </a>
                            <center>
                        </td>
                        <td class="center-vertically">
                            <center>
                                <a>
                                    <span class="glyphicon glyphicon-remove red" data-toggle="modal" data-target="#myModalEliminar"></span>
                                </a>
                            <center>
                         </td>
                    </tr>
                    <tr>
                        <td> <center> < Programa Eliminado 3 > </center> </td>
                        <td> <center> < Usuario Eliminó 3 > </center> </td>
                        <td> <center> < Fecha de Eliminación 3 > </center> </td>
                        <td class="center-vertically">
                            <center>
                                <a href="#">
                                    <span class="glyphicon glyphicon-refresh restaurar" 
                                          data-toggle="modal" 
                                          data-target="#myModalRestaurar"
                                          ></span>
                                </a>
                            <center>
                        </td>
                        <td class="center-vertically">
                            <center>
                                <a>
                                    <span class="glyphicon glyphicon-remove red" data-toggle="modal" data-target="#myModalEliminar"></span>
                                </a>
                            <center>
                         </td>
                    </tr>
            </tbody>
        </table>
    </div>
  </div>
</div>

</div>

<!-- Modal Restaurar-->
<div class="container">
  <div class="modal fade" id="myModalRestaurar" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close res" data-dismiss="modal">&times;</button>
            <center> <h4 class="modal-title">Restaurar</h4> </center>
        </div>
        <div class="modal-body">
            <center> <p>¿Está seguro que quiere restaurar este elemento?</p> </center>
            <br>
            <center>
                <a>
                  <button type="button" 
                          id="botonRestaurar"
                          class="btn blue-add btn-border">
                      Restaurar</button>
                </a>
                <button type="button" class="btn btn-default btn-border" data-dismiss="modal">Cerrar</button>
            </center>
          </div>
        </div>
      </div>
    </div>
  </div>


<!-- Modal Eliminar-->
<div class="container">
  <div class="modal fade" id="myModalEliminar" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
            <center> <h4 class="modal-title">Eliminar</h4> </center>
        </div>
        <div class="modal-body">
            <center> <p>¿Está seguro que desea eliminar de manera permanente este elemento? Se borraran todas las actividades asociadas al mismo</p> </center>
            <br>
            <center>
                <a>
                  <button type="button" 
                          class="btn blue-add btn-border"
                          id="botonEliminar"
                          data-id-tipo="">Eliminar</button>
                </a>
                <button type="button" class="btn btn-default btn-border" data-dismiss="modal">Cerrar</button>
            </center>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
          
<script type="text/javascript">
    
    // Restaurar
    
    $('#myModalRestaurar').on('show.bs.modal', function (event) {
        
        if (event.relatedTarget != null){
            $("#botonRestaurar").attr("data-id-tipo", event.relatedTarget.getAttribute("data-id-tipo"));
        }
    });
    
    $("#botonRestaurar").click(function (event){
        
        var id_tipo = $("#botonRestaurar").attr("data-id-tipo");
        ajax("{{=URL(f='restaurar_tipo')}}/"+id_tipo,[]);
        location.reload();
    });
    
    // Eliminar definitivamente
    
    $('#myModalEliminar').on('show.bs.modal', function (event){
        
        if (event.relatedTarget != null){
            $("#botonEliminar").attr("data-id-tipo", event.relatedTarget.getAttribute("data-id-tipo"));
        }
    });
    
    $("#botonEliminar").click(function (event){
        
        var id_tipo = $("#botonEliminar").attr("data-id-tipo");
        ajax("{{=URL('eliminar_tipo_papelera')}}/"+id_tipo,[]);
        location.reload();
    });
    
    $(document).ready(function () {
        document.getElementById("tabTiposDeTrabajo").click();
    });
</script>
{{end}}
